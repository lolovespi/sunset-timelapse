# Sunset Timelapse Configuration
# Location settings
location:
  city: "Birmingham"
  state: "AL"
  country: "USA"
  latitude: 33.5186
  longitude: -86.8104
  timezone: "America/Chicago"

# Camera settings
camera:
  ip: "192.168.6.44" # Change to your camera's IP address
  username: "admin" #recommend adding a separate user to read only camera access 
  # Password should be set via environment variable CAMERA_PASSWORD. Ensure that permissions changed to 600
  onvif_port: 8000 #no longer used. onvif doesn't work consistently
  rtsp_port: 554
  model: "RLC810-WA"

# Capture settings
capture:
  interval_seconds: 5
  time_before_sunset_minutes: 60
  time_after_sunset_minutes: 60
  image_format: "jpg"
  image_quality: 90

# Video settings
video:
  fps: 12  # 60 images per minute / 5 second interval = 12 fps for real-time
  output_format: "mp4"
  codec: "libx264"
  bitrate: "2M"
  resolution:
    width: 1920
    height: 1080

# Storage settings
storage:
  base_path: "/Users/<USER>/Documents/GitHub/sunset-timelapse/data"  # Sample for Mac - change <USER> to your username
  #base_path: "/home/pi/sunset_timelapse" #Sample for Raspberry Pi
  images_subdir: "images"
  videos_subdir: "videos"
  logs_subdir: "logs"
  temp_subdir: "temp"
  keep_images_days: 7  # Delete source images after N days
  keep_videos_locally_days: 1  # Delete local videos after upload and N days

# YouTube settings
youtube:
  # All sensitive data via environment variables
  # GOOGLE_APPLICATION_CREDENTIALS should point to service account JSON
  channel_name: "Your Channel Name" # Change to your actual YouTube channel name
  video_title_format: "Sunset {date}"  # {date} will be replaced with MM/DD/YY 
  description_template: |
    Daily sunset timelapse from <LOCATION>
    Captured on {date} from {start_time} to {end_time}
    
    Camera: Reolink RLC810-WA
    Interval: 5 seconds
    
    #sunset #timelapse #alabama #pelham
  privacy_status: "public"  # public, private, unlisted
  category_id: 22  # People & Blogs

# Email notification settings
email:
  enabled: false  # Set to true to enable email notifications
  smtp_server: "smtp.gmail.com"  # Gmail SMTP server (or your provider)
  smtp_port: 587  # Standard TLS port
  use_tls: true  # Use TLS encryption
  from_email: "your-email@gmail.com"  # Sender email address
  to_emails:  # List of recipient email addresses
    - "recipient1@example.com"
    - "recipient2@example.com"
  # Set these via environment variables for security:
  # EMAIL_USERNAME - your email username
  # EMAIL_PASSWORD - your email password or app-specific password
  username: "${EMAIL_USERNAME}"  # Will be read from environment
  password: "${EMAIL_PASSWORD}"  # Will be read from environment

# Logging settings
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  max_file_size_mb: 10
  backup_count: 5
  console_output: true

# Advanced settings
advanced:
  max_retries: 3
  retry_delay_seconds: 30
  connection_timeout_seconds: 30
  ffmpeg_threads: 4
  cleanup_on_error: true

sbs:
  enabled: true
  analysis_resize_height: 80  # Performance fix

  # Sky region boundaries (currently using code defaults)
  horizon_region_ratio: 0.8      # Focus on lower 80% for sunset glow
  zenith_region_ratio: 0.3       # Top 30% for sky analysis
  foreground_exclude_ratio: 0.2  # Exclude bottom 20% (buildings/trees)

  # Human calibration
  human_calibration_factor: 0.10  # 90% score reduction

  sky_region_ratio: 0.6  # Legacy v1 compatibility
  golden_hour_minutes: 30
  save_frame_metrics: true
  save_chunk_summaries: true
  performance_logging: true

# Meteor detection settings
meteor:
  enabled: false                 # Set to true to enable automatic overnight meteor scanning at 7 AM

  # Nighttime scanning window (automatically uses sunset/sunrise times)
  sunset_offset_minutes: 30      # Start scanning this many minutes AFTER sunset (ensures darkness)
  sunrise_offset_minutes: 30     # Stop scanning this many minutes BEFORE sunrise (avoids daylight)

  # Detection thresholds
  min_brightness_threshold: 200  # Minimum brightness (0-255) to consider as potential meteor
  min_area: 10                   # Minimum pixel area for detection
  max_area: 5000                 # Maximum pixel area (filter out large bright objects)

  # Track validation
  min_frames: 3                  # Minimum frames to confirm meteor (filters noise)
  max_frames: 30                 # Maximum frames (meteors are brief events)
  min_linearity: 0.85            # Path linearity score (0-1, higher = more linear)
  min_velocity: 5.0              # Minimum velocity in pixels/frame
  max_gap_frames: 2              # Max frames between detections to continue track

  # Clip extraction
  clip_padding_seconds: 3        # Seconds of padding before/after meteor event

  # Storage
  retention_days: 30             # Keep meteor clips for this many days